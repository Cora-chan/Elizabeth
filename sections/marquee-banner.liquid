{% schema %}
{
  "name": "Marquee Banner",
  "settings": [
    {
      "type": "text",
      "id": "banner_text",
      "label": "Banner Text",
      "default": "This is an example of an infinite scrolling banner..."
    },
    {
      "type": "range",
      "id": "speed",
      "label": "Scroll Speed",
      "min": 1,
      "max": 10,
      "default": 2
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#CEBCB4"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    }
  ]
}
{% endschema %}

<div style="background-color: {{ section.settings.bg_color }};" class="w-full overflow-hidden">
  <div id="marquee-text" class="inline-block whitespace-nowrap" style="color: {{ section.settings.text_color }};">
    {{ section.settings.banner_text }}
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const ticker = document.getElementById('marquee-text');
  const speed = {{ section.settings.speed }}; 

  
  ticker.innerHTML += ' â€¢ ' + ticker.innerHTML;

  let pos = 0;
  function scrollTicker() {
    pos -= speed;
    if (Math.abs(pos) >= ticker.scrollWidth / 2) pos = 0;
    ticker.style.transform = `translateX(${pos}px)`;
    requestAnimationFrame(scrollTicker);
  }

  scrollTicker();
});
</script>
